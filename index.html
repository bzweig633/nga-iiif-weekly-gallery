<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NGA Weekly Gallery</title>
    <script src="https://www.unpkg.com/@samvera/clover-iiif@latest/dist/web-components/index.umd.js"></script>
    <style>
        body { margin: 0; background: #FFFF color: #eee; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        h1, h2 { color: #000; text-transform: uppercase; letter-spacing: 2px; }
        
        /* Thumbnail Grid Styles */
        .gallery-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 20px; 
            margin-top: 3rem; 
        }
        .card { 
            background: #f2e6e6; 
            border: 1px solid #333; 
            padding: 10px; 
            border-radius: 8px; 
            transition: transform 0.2s; 
        }
        .card:hover { transform: translateY(-5px); border-color: #c5a059; }
        
        .thumb { 
            width: 100%; 
            height: 200px; 
            object-fit: cover; 
            border-radius: 4px;
            background: #000;
        }
        
        .card-title { font-size: 0.9rem; margin: 10px 0; height: 2.5rem; overflow: hidden; }
        
        .btn { 
            display: block; 
            padding: 8px; 
            background: #111; 
            color: #f4ffff; 
            text-decoration: none; 
            font-weight: bold; 
            border-radius: 4px; 
            font-size: 0.8rem;
        }

    clover-viewer {
        display: block;
        height: 600px; /* Force it to take up space */
        width: 100%;
        margin-bottom: 3em;
    }

    .clover-wrapper {
        margin-bottom: 10em;
    }    
       
    </style>
</head>
<body>
    <div class="container">
        <h1>Weekly NGA Curated Gallery</h1>
        
        <div class="clover-wrapper">
            <clover-viewer iiif-content="https://bzweig633.github.io/nga-iiif-weekly-gallery/nga_random_collection.json"></clover-viewer>
        </div>
            
        <hr style="margin: 40px 0; border: 0; border-top: 1px solid #333;">

        <h2>Collection Overview & Downloads</h2>
        <div id="gallery" class="gallery-grid"></div>
    </div>

    <script>
        // 2. Select the element
      const viewer = document.querySelector('clover-viewer');

  // 3. Define the configuration object
      const cloverOptions = {
        informationPanel: {
          render: false,
          open: false,
    },
    // You can also hide the canvas navigation here if desired
    // canvasNavigation: { render: false }
  };

  // 4. Assign the options directly to the element property
  viewer.options = cloverOptions;
        
        
        //for downloads
        fetch('nga_random_collection.json')
            .then(res => res.json())
            .then(data => {
                const gallery = document.getElementById('gallery');
                data.items.forEach(canvas => {
                    const fullImgUrl = canvas.items[0].items[0].body.id;
                    
                    // IIIF Magic: Replace 'full/max' with 'full/!250,250' for a thumbnail
                    const thumbUrl = fullImgUrl.replace('full/max', 'full/!250,250');
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <img src="${thumbUrl}" class="thumb" alt="${canvas.label.en[0]}">
                        <div class="card-title"><strong>${canvas.label.en[0]}</strong></div>
                        <a href="${fullImgUrl}" target="_blank" class="btn">View Full Image</a>
                    `;
                    gallery.appendChild(card);
                });
            })
            .catch(err => console.error("Error loading manifest:", err));
    </script>
</body>
</html>
