<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NGA Daily Gallery</title>
     <script src="https://www.unpkg.com/@samvera/clover-iiif@latest/dist/web-components/index.umd.js"></script>
    <style>
        body { margin: 0; background: #FFFF color: #eee; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        h1, h2 { color: #000; text-transform: uppercase; letter-spacing: 2px; }
        
        /* Thumbnail Grid Styles */
        .gallery-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 20px; 
            margin-top: 3rem; 
        }
        .card { 
            background: #f2e6e6; 
            border: 1px solid #333; 
            padding: 10px; 
            border-radius: 8px; 
            transition: transform 0.2s; 
        }
        .card:hover { transform: translateY(-5px); border-color: #c5a059; }
        
        .thumb { 
            width: 100%; 
            height: 200px; 
            object-fit: cover; 
            border-radius: 4px;
            background: #000;
        }
        
        .card-title { font-size: 0.9rem; margin: 10px 0; height: 2.5rem; overflow: hidden; }
        
        .btn { 
            display: block; 
            padding: 8px; 
            background: #111; 
            color: #f4ffff; 
            text-decoration: none; 
            font-weight: bold; 
            border-radius: 4px; 
            font-size: 0.8rem;
            }  

          #mirador-viewer {
            width: 100%;
            height: 80vh; /* Takes up 80% of the screen height */
            position: relative;
            background: #000;
            border: 1px solid #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>

    <body>
    <div class="container">
        <h1>Daily NGA Curated Gallery</h1>            

        <div class="viewer-container">
            <clover-viewer 
            id="https://bzweig633.github.io/nga-iiif-weekly-gallery/nga_random_collection.json"
            information-panel-open="false">
            </clover-viewer>
        </div>
        
        <hr style="margin: 40px 0; border: 0; border-top: 1px solid #333;">

        <h2>Collection Overview & Downloads</h2>
        <div id="gallery" class="gallery-grid"></div>
    </div>

    <script>    
        //for downloads
        fetch('nga_random_collection.json')
            .then(res => res.json())
            .then(data => {
                const gallery = document.getElementById('gallery');
                data.items.forEach(canvas => {
                    const fullImgUrl = canvas.items[0].items[0].body.id;
                    
                    // IIIF Magic: Replace 'full/max' with 'full/!250,250' for a thumbnail
                    const thumbUrl = fullImgUrl.replace('full/max', 'full/!250,250');
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <img src="${thumbUrl}" class="thumb" alt="${canvas.label.en[0]}">
                        <div class="card-title"><strong>${canvas.label.en[0]}</strong></div>
                        <div class="card-artist">${canvas.metadata[0].value.en[0]}</div>
                        <a href="${fullImgUrl}" target="_blank" class="btn">View and Download Image</a>
                    `;
                    gallery.appendChild(card);
                });
            })
            .catch(err => console.error("Error loading manifest:", err));
    </script>
</body>
</html>
